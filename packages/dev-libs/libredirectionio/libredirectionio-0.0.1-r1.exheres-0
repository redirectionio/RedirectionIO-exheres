# Copyright 2019 RedirectionIO <contact@redirection.io>
# Distributed under the terms of the MIT License

require github [ user="redirectionio" tag="v${PV}" force_git_clone=true ]

SUMMARY="RedirectionIO Library."
HOMEPAGE="https://github.com/redirectionio/libredirectionio"

LICENCES="MIT"
SLOT="0"
PLATFORMS="~amd64"

DEPENDENCIES=""

BUGS_TO="contact@redirection.io"

RESTRICT="strip"

WORK="${WORKBASE}/${MY_PNV}_linux"

src_compile() {
    option bash-completion && edo ./clever --bash-autocomplete-script "/usr/$(exhost --target)/bin/clever" > clever-bash-completion
    option zsh-completion && edo ./clever --zsh-autocomplete-script "/usr/$(exhost --target)/bin/clever" > clever-zsh-completion
}

src_install() {
    dobin clever
    dobashcompletion clever-bash-completion clever
    dozshcompletion clever-zsh-completion _clever
}
